---
author: CC-2018
layout: post
title: vi常用快捷键
date: 2017-11-03 16:48:01 +0800
categories: linux
tag: linux vi
---

* content
{:toc}

### 搜索

```
/text 向后搜索
？text 向前搜索
:g/targetWord 全局搜索
:%s/oldWord/newWord/gc 全局替换
n 搜索下一个同样的内容
N 搜索上一个同样的内容
```

### 删除

```
d删除行、x删除字符

dG 删除至行尾
d0 删除至行首
gg dG 删除全部内容

# 可以结合鼠标移动进行删除
dh 删除前一个字符
dd 删除当前行
dj 删除上一行
dk 删除下一行
dw 删除到下一个单词开头
de 删除到本单词末尾
dE 删除到本单词末尾包括标点在内
db 删除到前一个单词
dB 删除到前一个单词包括标点在内
d$ 删除当前字符之后的所有字符（本行）

:1,10d 删除1-10行
:11,$d 删除11行及以后所有的行
:1,$d 删除所有行
```

### 替换

```
rc 用 c 替换光标所指向的当前字符；
nrc 用 c 替换光标所指向的前 n 个字符
5rA 用 A 替换光标所指向的前 5 个字符；
:%s/oldWord/newWord/gc 全局替换

:%s/str1/str2/        用字符串 str2 替换行中首次出现的字符串 str1
:s/str1/str2/g        用字符串 str2 替换行中所有出现的字符串 str1
:.,$ s/str1/str2/g    用字符串 str2 替换正文当前行到末尾所有出现的字符串 str1
:1,$ s/str1/str2/g    用字符串 str2 替换正文中所有出现的字符串 str1
:g/str1/s//str2/g     功能同上
:m,ns/str1/str2/g     将从m行到n行的str1替换成str2
```

### 显示行号

```
# 显示行号
:set nu
:set number

# 不显示行号
:set nonu
:set nonumber
```

### 粘贴不自动缩进

```
# 粘贴不自动缩进
:set paste
```

### 设置编码

```
# 设置utf-8格式
:set encoding=utf-8
```

### 复制粘贴
```
yy 拷贝当前行
nyy 拷贝当前后开始的n行
ddp 交换当前行和其下一行
xp 交换当前字符和其后一个字符
p 粘贴到下一行或右侧，修改和删除的数据自动到粘贴板中
P 粘贴到上一行或左侧
```

### 撤销和重复

```
u 撤销最近一次修改 undo
. 重复最后一条修改正文的命令
U 撤销所有修改
ctrl + r 取消最后一次的撤销 redo
```

### 打开、保存、退出

```
:e path_to_file/filename 在已经启动的Vim中打开一个文件
:w 保存当前编辑的文件
:w file_temp 将当前文件另存为file_temp

:wq 保存并退出
:e! 放弃所有修改，并打开原来文件
ZZ 保存并退出
Shift +Z,Q 无条件退出
q! 无条件退出
```

### 移动到具体行

```
:n 将光标移到第 n 行
```

### 分屏

```
:vsplit（可用缩写 :vsp） 左右分屏
:split（可用缩写 :sp） 上下分屏
ctrl + w + hjkl 窗口之间移动
ctrl + w + w 逆时针遍历
ctrl + w = 让所有的屏都有一样的高度；
ctrl + w + 增加高度；
ctrl + w - 减少高度。
另外，也可以在终端里启动vim时就开启分屏操作
vim -On file1 file2… 打开 file1 和 file2 ，垂直分屏
vim -on file1 file2… 打开 file1 和 file2 ，水平分屏
```

### 移动快捷键

编辑模式下：

字符移动（逆时针左下右上对应）:

```
h，j，k，l 左下上右
```

行内移动:

```
# 常用
w 正向移动到相邻单词的首字符
b 逆向移动到相邻单词的首字符

B 向前一个单词,以空格和TAB为分隔符
e 正向移动到相邻单词的尾字符
ge 逆向移动到相邻单词的尾字符

# 常用
0 数字０，左移光标到本行的开始
$ 右移光标，到本行的末尾
^ 移动光标，到本行的第一个非空字符
```

页移动:

```
# 常用
ctrl + f 在文件中前移一页（相当于 page down）；
ctrl + b 在文件中后移一页（相当于 page up）；
ctrl + d 往下滚动半屏
ctrl + u 往上滚动半屏

H 跳转到当前屏幕的第一行
M 跳转到本屏显示的中间一行
L 跳转到最后一行

2H 表示将光标移到屏幕的第２行
3L 表示将光标移到屏幕的倒数第3行
z + enter 是当前行成为屏幕的第一行
z + - 是当前一行成为最后一行
```

文件移动

```
gg 跳到首行
G 调到尾行
nG 跳转到n行
% 跳到另一边括号
```
